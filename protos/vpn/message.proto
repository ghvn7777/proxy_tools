syntax = "proto3";

package vpn;

message DomainAddr {
  string domain = 1;
  uint32 port = 2;
}

message DestinationAddr {
  oneof addr {
    string v4 = 1;
    string v6 = 2;
    DomainAddr domain = 3;
  }
}

message CommandRequest {
  uint32 port_id = 1;
  oneof command {
      DestinationAddr connect = 2;
      bytes data = 3;
  }
}

message CommandResponse {
  enum ConnectStatus {
    OK = 0;
    ERROR = 1;
  }

  uint32 port_id = 1;
  oneof response {
      ConnectStatus connect = 2;
      bytes data = 3;
  }
}
